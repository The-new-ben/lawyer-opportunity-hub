# ××¡××š ×ª×™×¢×•×“ ×˜×›× ×™ ××¤×•×¨×˜ - ××¢×¨×›×ª ×”×–×“×× ×•×™×•×ª ×¢×•×¨×›×™ ×“×™×Ÿ

## ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×
1. [×¡×§×™×¨×” ×›×œ×œ×™×ª](#×¡×§×™×¨×”-×›×œ×œ×™×ª)
2. [××¨×›×™×˜×§×˜×•×¨×”](#××¨×›×™×˜×§×˜×•×¨×”)
3. [×¡×˜×§ ×˜×›× ×•×œ×•×’×™](#×¡×˜×§-×˜×›× ×•×œ×•×’×™)
4. [×”×§××ª ×¡×‘×™×‘×ª ×¤×™×ª×•×—](#×”×§××ª-×¡×‘×™×‘×ª-×¤×™×ª×•×—)
5. [××‘× ×” ×”×¤×¨×•×™×§×˜](#××‘× ×”-×”×¤×¨×•×™×§×˜)
6. [×‘×¡×™×¡ ×”× ×ª×•× ×™×](#×‘×¡×™×¡-×”× ×ª×•× ×™×)
7. [Edge Functions](#edge-functions)
8. [API Documentation](#api-documentation)
9. [××‘×˜×—×”](#××‘×˜×—×”)
10. [×¤×¨×™×¡×” ×•-CI/CD](#×¤×¨×™×¡×”-×•-cicd)
11. [×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª](#×¤×ª×¨×•×Ÿ-×‘×¢×™×•×ª)

---

## ğŸ¯ ×¡×§×™×¨×” ×›×œ×œ×™×ª

**×©× ×”×¤×¨×•×™×§×˜:** Lawyer Opportunity Hub  
**×“×•××™×™×Ÿ:** [jus-tice.com](https://jus-tice.com)  
**××˜×¨×”:** ×¤×œ×˜×¤×•×¨××” ×“×™×’×™×˜×œ×™×ª ×œ×—×™×‘×•×¨ ×‘×™×Ÿ ×œ×§×•×—×•×ª ×œ×¢×•×¨×›×™ ×“×™×Ÿ ×¢× AI ×—×›× ×œ× ×™×”×•×œ ×ª×™×§×™×  

### ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª:
- âœ… **Smart Legal Intake** - ×§×œ×™×˜×ª ××™×“×¢ ××©×¤×˜×™ ×—×›××” ×‘×××¦×¢×•×ª AI
- âœ… **International Court** - ×‘×™×ª ××©×¤×˜ ×“×™×’×™×˜×œ×™ ×¢× ×¡×™××•×œ×¦×™×•×ª AI
- âœ… **Lead Management** - × ×™×”×•×œ ×œ×™×“×™× ×¢× ××™× ×˜×’×¨×¦×™×” ×œ×•×•××˜×¡××¤
- âœ… **Case Management** - × ×™×”×•×œ ×ª×™×§×™× ××ª×§×“×
- âœ… **Payment System** - ××¢×¨×›×ª ×ª×©×œ×•××™× ××œ××” (Stripe)
- âœ… **Voice Transcription** - ×ª××œ×•×œ ×§×•×œ×™ (OpenAI Whisper)
- âœ… **Calendar Integration** - ××™× ×˜×’×¨×¦×™×” ×¢× Google Calendar
- âœ… **Rating System** - ××¢×¨×›×ª ×“×™×¨×•×’×™× ×•××©×•×‘

---

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Smart Intake  â”‚  â”‚ International   â”‚  â”‚   Dashboard  â”‚ â”‚
â”‚  â”‚     Portal      â”‚  â”‚     Court       â”‚  â”‚   & Cases    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AI Chat       â”‚  â”‚   Voice Input   â”‚  â”‚   Calendar   â”‚ â”‚
â”‚  â”‚   Components    â”‚  â”‚   & Recording   â”‚  â”‚  Integration â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Supabase Backend Cloud                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PostgreSQL    â”‚  â”‚   Supabase      â”‚  â”‚    Edge      â”‚ â”‚
â”‚  â”‚    Database     â”‚  â”‚     Auth        â”‚  â”‚  Functions   â”‚ â”‚
â”‚  â”‚   (25 Tables)   â”‚  â”‚   (JWT/RLS)     â”‚  â”‚ (13 Functions)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   API Gateway   â”‚  â”‚   Real-time     â”‚  â”‚   Storage    â”‚ â”‚
â”‚  â”‚   & Webhooks    â”‚  â”‚   Subscriptions â”‚  â”‚   Buckets    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   External Integrations                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     OpenAI      â”‚  â”‚   WhatsApp      â”‚  â”‚    Stripe    â”‚ â”‚
â”‚  â”‚   (GPT Models   â”‚  â”‚ Business API    â”‚  â”‚   Payments   â”‚ â”‚
â”‚  â”‚   & Whisper)    â”‚  â”‚                 â”‚  â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Google Calendar â”‚  â”‚    HubSpot      â”‚  â”‚   Calendly   â”‚ â”‚
â”‚  â”‚   Integration   â”‚  â”‚      CRM        â”‚  â”‚  Scheduling  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» ×¡×˜×§ ×˜×›× ×•×œ×•×’×™

### Frontend Stack
```json
{
  "framework": "React 18.3.1",
  "language": "TypeScript 5.5.3",
  "bundler": "Vite 5.4.2",
  "routing": "React Router DOM 6.26.2",
  "styling": "TailwindCSS 3.4.10",
  "state_management": "TanStack Query 5.56.2",
  "forms": "React Hook Form 7.53.0",
  "ui_components": "Radix UI + Shadcn/ui",
  "themes": "Next Themes 0.3.0"
}
```

### Backend Stack
```json
{
  "platform": "Supabase Cloud",
  "database": "PostgreSQL 15",
  "auth": "Supabase Auth (JWT + RLS)",
  "api": "Supabase REST API + GraphQL",
  "realtime": "Supabase Realtime",
  "storage": "Supabase Storage",
  "edge_functions": "Deno Runtime",
  "webhooks": "Supabase Webhooks"
}
```

### External Services
```json
{
  "ai_models": "OpenAI (GPT-4o-mini, Whisper)",
  "messaging": "WhatsApp Business API",
  "payments": "Stripe",
  "calendar": "Google Calendar API",
  "crm": "HubSpot API",
  "scheduling": "Calendly API",
  "hosting": "Netlify",
  "monitoring": "Sentry"
}
```

---

## ğŸš€ ×”×§××ª ×¡×‘×™×‘×ª ×¤×™×ª×•×—

### ×“×¨×™×©×•×ª ××§×“×™××•×ª
```bash
# Node.js ×’×¨×¡×” 18 ×•××¢×œ×”
node --version  # >= 18.0.0
npm --version   # >= 8.0.0

# ××• Bun (××•××œ×¥)
curl -fsSL https://bun.sh/install | bash
```

### 1. ×©×›×¤×•×œ ×”×¤×¨×•×™×§×˜
```bash
git clone [repository-url]
cd lawyer-opportunity-hub
```

### 2. ×”×ª×§× ×ª dependencies
```bash
# ×¢× npm
npm install

# ××• ×¢× bun (××•××œ×¥)
bun install
```

### 3. ×”×’×“×¨×ª Environment Variables
```bash
# ×”×¢×ª×§×ª ×§×•×‘×¥ ×”×“×•×’××”
cp .env.example .env.local

# ×¢×¨×™×›×ª ×”×§×•×‘×¥ ×¢× ×”××¤×ª×—×•×ª ×”× ×›×•× ×™×
nano .env.local
```

#### ××©×ª× ×™ ×¡×‘×™×‘×” × ×“×¨×©×™×:
```env
# Supabase Configuration
SUPABASE_URL=https://mlnwpocuvjnelttvscja.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# External APIs (Optional for development)
VITE_OPENAI_API_KEY=sk-...
VITE_SENTRY_DSN=https://...
```

### 4. ×”×¨×¦×ª ×©×¨×ª ×”×¤×™×ª×•×—
```bash
# ×¢× npm
npm run dev

# ×¢× bun
bun dev

# ×”××ª×¨ ×™×”×™×” ×–××™×Ÿ ×‘: http://localhost:5173
```

### 5. ×‘×“×™×§×ª ×”×§××”
```bash
# ×”×¨×¦×ª ×‘×“×™×§×•×ª
npm run test

# ×‘×“×™×§×ª linting
npm run lint

# ×‘× ×™×™×ª production
npm run build
```

---

## ğŸ“ ××‘× ×” ×”×¤×¨×•×™×§×˜

```
src/
â”œâ”€â”€ components/           # ×¨×›×™×‘×™ UI ×›×œ×œ×™×™×
â”‚   â”œâ”€â”€ ui/              # ×¨×›×™×‘×™ UI ×‘×¡×™×¡×™×™× (shadcn)
â”‚   â”œâ”€â”€ auth/            # ×¨×›×™×‘×™ ××™××•×ª
â”‚   â”œâ”€â”€ court/           # ×¨×›×™×‘×™× ×œ×‘×™×ª ×”××©×¤×˜ ×”×“×™×’×™×˜×œ×™
â”‚   â”œâ”€â”€ polls/           # ××¢×¨×›×ª ×¡×§×¨×™×
â”‚   â”œâ”€â”€ professionals/   # ××§×¦×•×¢×™×™× ×•×¡×¤×§×™×
â”‚   â”œâ”€â”€ social/          # ×ª×›×•× ×•×ª ×—×‘×¨×ª×™×•×ª
â”‚   â””â”€â”€ subscription/    # × ×™×”×•×œ ×× ×•×™×™×
â”‚
â”œâ”€â”€ pages/               # ×“×¤×™ ×”××¤×œ×™×§×¦×™×”
â”‚   â”œâ”€â”€ Auth.tsx         # ×“×£ ×”×ª×—×‘×¨×•×ª
â”‚   â”œâ”€â”€ Dashboard.tsx    # ×œ×•×— ×‘×§×¨×” ×¨××©×™
â”‚   â”œâ”€â”€ Cases.tsx        # × ×™×”×•×œ ×ª×™×§×™×
â”‚   â”œâ”€â”€ Intake.tsx       # ×§×œ×™×˜×ª ×œ×§×•×—×•×ª
â”‚   â”œâ”€â”€ GlobalCourt.tsx  # ×‘×™×ª ××©×¤×˜ ×‘×™× ×œ××•××™
â”‚   â””â”€â”€ court/           # ×“×¤×™ ×‘×™×ª ××©×¤×˜
â”‚
â”œâ”€â”€ aiIntake/            # ××¢×¨×›×ª AI ×œ×§×œ×™×˜×ª ××™×“×¢
â”‚   â”œâ”€â”€ AIBridge.tsx     # ×’×©×¨ ×‘×™×Ÿ AI ×œ×˜×¤×¡×™×
â”‚   â”œâ”€â”€ EnhancedAIParser.ts  # ×¤×¨×¡×¨ AI ××ª×§×“×
â”‚   â”œâ”€â”€ SmartConversationEngine.ts  # ×× ×•×¢ ×©×™×— ×—×›×
â”‚   â””â”€â”€ useFormWithAI.ts # hook ×œ×˜×¤×¡×™× ×¢× AI
â”‚
â”œâ”€â”€ features/            # ×ª×›×•× ×•×ª ××ª×§×“××•×ª
â”‚   â””â”€â”€ ai/              # ×¤×•×¨×˜×œ×™ AI
â”‚
â”œâ”€â”€ hooks/               # React hooks ××•×ª×××™×
â”‚   â”œâ”€â”€ useAuth.tsx      # ××™××•×ª ××©×ª××©×™×
â”‚   â”œâ”€â”€ useCases.ts      # × ×™×”×•×œ ×ª×™×§×™×
â”‚   â”œâ”€â”€ useClients.ts    # × ×™×”×•×œ ×œ×§×•×—×•×ª
â”‚   â””â”€â”€ useFieldExtraction.ts  # ×—×™×œ×•×¥ ×©×“×•×ª AI
â”‚
â”œâ”€â”€ integrations/        # ××™× ×˜×’×¨×¦×™×•×ª ×—×™×¦×•× ×™×•×ª
â”‚   â”œâ”€â”€ supabase/        # ×§×œ×™×™× ×˜ Supabase
â”‚   â”œâ”€â”€ calendly.ts      # Calendly API
â”‚   â””â”€â”€ googleCalendar.ts # Google Calendar
â”‚
â”œâ”€â”€ lib/                 # ×¡×¤×¨×™×•×ª ×¢×–×¨
â”‚   â”œâ”€â”€ utils.ts         # ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×›×œ×œ×™×•×ª
â”‚   â”œâ”€â”€ aiService.ts     # ×©×™×¨×•×ª×™ AI
â”‚   â””â”€â”€ whatsappService.ts # ×©×™×¨×•×ª WhatsApp
â”‚
â””â”€â”€ services/            # ×©×™×¨×•×ª×™× ×¢×¡×§×™×™×
    â”œâ”€â”€ evidence.ts      # × ×™×”×•×œ ×¨××™×•×ª
    â””â”€â”€ gptClient.ts     # ×§×œ×™×™× ×˜ GPT
```

### ×§×‘×¦×™ ×ª×¦×•×¨×” ×—×©×•×‘×™×:
```
â”œâ”€â”€ tailwind.config.ts   # ×ª×¦×•×¨×ª TailwindCSS
â”œâ”€â”€ index.css           # ××©×ª× ×™ ×¢×™×¦×•×‘ ×’×œ×•×‘×œ×™×™×
â”œâ”€â”€ vite.config.ts      # ×ª×¦×•×¨×ª Vite
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ config.toml     # ×ª×¦×•×¨×ª Supabase
â”‚   â””â”€â”€ functions/      # Edge Functions
â””â”€â”€ public/
    â””â”€â”€ _redirects      # ×ª×¦×•×¨×ª redirects ×œNetlify
```

---

## ğŸ—„ï¸ ×‘×¡×™×¡ ×”× ×ª×•× ×™×

### ××‘× ×” ×”×˜×‘×œ××•×ª ×”×¢×™×§×¨×™×•×ª (25 ×˜×‘×œ××•×ª)

#### ×˜×‘×œ××•×ª ××©×ª××©×™× ×•××™××•×ª:
```sql
-- ×¤×¨×•×¤×™×œ×™ ××©×ª××©×™×
CREATE TABLE profiles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  full_name TEXT,
  phone TEXT,
  company_name TEXT,
  role TEXT DEFAULT 'customer',
  avatar_url TEXT,
  whatsapp_number TEXT,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- ×ª×¤×§×™×“×™ ××©×ª××©
CREATE TABLE user_roles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  role app_role NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now()
);

-- ×¢×•×¨×›×™ ×“×™×Ÿ
CREATE TABLE lawyers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  profile_id UUID REFERENCES profiles NOT NULL,
  years_experience INTEGER,
  hourly_rate NUMERIC,
  rating NUMERIC DEFAULT 0,
  total_cases INTEGER DEFAULT 0,
  specializations TEXT[] DEFAULT '{}',
  law_firm TEXT,
  bio TEXT,
  location TEXT,
  availability_status TEXT DEFAULT 'available',
  verification_status TEXT DEFAULT 'pending',
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
```

#### ×˜×‘×œ××•×ª ×¢×¡×§×™×•×ª:
```sql
-- ×œ×™×“×™×
CREATE TABLE leads (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  customer_phone TEXT NOT NULL,
  customer_name TEXT NOT NULL,
  customer_email TEXT,
  case_description TEXT NOT NULL,
  legal_category TEXT NOT NULL,
  urgency_level TEXT DEFAULT 'medium',
  preferred_location TEXT,
  estimated_budget NUMERIC,
  case_details JSONB DEFAULT '{}',
  assigned_lawyer_id UUID REFERENCES lawyers,
  status TEXT DEFAULT 'new',
  source TEXT DEFAULT 'website',
  visibility_level TEXT DEFAULT 'restricted',
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- ×ª×™×§×™×
CREATE TABLE cases (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  client_id UUID REFERENCES profiles,
  assigned_lawyer_id UUID REFERENCES lawyers,
  legal_category TEXT NOT NULL,
  status TEXT DEFAULT 'open',
  priority TEXT DEFAULT 'medium',
  estimated_budget NUMERIC,
  notes TEXT,
  opened_at TIMESTAMPTZ DEFAULT now(),
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- ×¦×™×˜×•×˜×™ ××—×™×¨
CREATE TABLE quotes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  lead_id UUID REFERENCES leads NOT NULL,
  lawyer_id UUID REFERENCES lawyers NOT NULL,
  quote_amount NUMERIC NOT NULL,
  service_description TEXT NOT NULL,
  estimated_duration_days INTEGER,
  payment_terms TEXT,
  terms_and_conditions TEXT,
  valid_until TIMESTAMPTZ,
  status TEXT DEFAULT 'pending',
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
```

#### ×˜×‘×œ××•×ª AI ×•××ª×§×“××•×ª:
```sql
-- ×˜×™×•×˜×•×ª ×ª×™×§×™× ×¢× AI
CREATE TABLE case_drafts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  title TEXT,
  description TEXT,
  legal_category TEXT,
  jurisdiction TEXT,
  location TEXT,
  claim_amount NUMERIC,
  parties JSONB DEFAULT '[]',
  evidence JSONB DEFAULT '[]',
  extracted_fields JSONB DEFAULT '{}',
  confidence_score NUMERIC DEFAULT 0,
  readiness_score INTEGER DEFAULT 0,
  version_hash TEXT,
  status TEXT DEFAULT 'draft',
  is_simulation BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- ×œ×•×’×™ ×—×™×œ×•×¥ AI
CREATE TABLE ai_extraction_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  case_draft_id UUID REFERENCES case_drafts,
  input_text TEXT NOT NULL,
  extracted_fields JSONB,
  confidence_score NUMERIC,
  processing_time_ms INTEGER,
  model_used TEXT DEFAULT 'gpt-4o-mini',
  created_at TIMESTAMPTZ DEFAULT now()
);

-- ×ª××œ×•×œ ×§×•×œ×™
CREATE TABLE voice_transcriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  case_draft_id UUID REFERENCES case_drafts,
  transcription_text TEXT NOT NULL,
  language_detected TEXT DEFAULT 'he-IL',
  audio_duration_seconds INTEGER,
  confidence_score NUMERIC,
  created_at TIMESTAMPTZ DEFAULT now()
);
```

### RLS Policies (Row Level Security)

×›×œ ×”×˜×‘×œ××•×ª ××•×’× ×•×ª ×‘-RLS policies:

```sql
-- ×“×•×’××” ×œ×˜×‘×œ×ª profiles
CREATE POLICY "Users can view their own profile" 
ON profiles FOR SELECT 
USING (user_id = auth.uid());

CREATE POLICY "Users can update their own profile" 
ON profiles FOR UPDATE 
USING (user_id = auth.uid());

-- ×“×•×’××” ×œ×˜×‘×œ×ª cases
CREATE POLICY "Clients can view their own cases" 
ON cases FOR SELECT 
USING (
  client_id IN (
    SELECT id FROM profiles WHERE user_id = auth.uid()
  ) OR 
  assigned_lawyer_id IN (
    SELECT l.id FROM lawyers l 
    JOIN profiles p ON l.profile_id = p.id 
    WHERE p.user_id = auth.uid()
  ) OR 
  get_current_user_role() = 'admin'
);
```

### ×¤×•× ×§×¦×™×•×ª ×‘×¡×™×¡ × ×ª×•× ×™×

```sql
-- ×§×‘×œ×ª ×ª×¤×§×™×“ ××©×ª××© × ×•×›×—×™
CREATE FUNCTION get_current_user_role()
RETURNS TEXT AS $$
  SELECT role::text FROM user_roles 
  WHERE user_id = auth.uid() LIMIT 1;
$$ LANGUAGE sql STABLE SECURITY DEFINER;

-- ×—×™×©×•×‘ ×¦×™×•×Ÿ ×”×ª×××” ×œ×¢×•×¨×š ×“×™×Ÿ
CREATE FUNCTION calculate_matching_score(
  p_lawyer_id UUID, 
  p_legal_category TEXT, 
  p_estimated_budget NUMERIC DEFAULT 0
)
RETURNS INTEGER AS $$
  -- ×œ×•×’×™×§×” ××•×¨×›×‘×ª ×œ×—×™×©×•×‘ ×¦×™×•×Ÿ ×”×ª×××”
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- ×¢×™×‘×•×“ ×œ×™×“ × ×›× ×¡ ××•×•××˜×¡××¤
CREATE FUNCTION process_incoming_lead(
  p_from_number TEXT, 
  p_content TEXT
)
RETURNS UUID AS $$
  -- ×™×¦×™×¨×ª ×œ×™×“ ×—×“×© ×•×¢×™×‘×•×“ ×”×ª×•×›×Ÿ
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

---

## âš¡ Edge Functions (13 ×¤×•× ×§×¦×™×•×ª)

### ×¤×•× ×§×¦×™×•×ª AI:
```typescript
// supabase/functions/ai-intake-openai/index.ts
// ××˜×¤×œ×ª ×‘×—×™×œ×•×¥ ××™×“×¢ ××©×¤×˜×™ ×‘×××¦×¢×•×ª OpenAI
serve(async (req) => {
  const { messages } = await req.json();
  
  const response = await fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${Deno.env.get('OPENAI_API_KEY')}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'gpt-4o-mini',
      messages: messages,
      // ×¤×¨××˜×¨×™× × ×•×¡×¤×™×...
    }),
  });
  
  return new Response(JSON.stringify(data));
});
```

### ×¤×•× ×§×¦×™×•×ª ×•×•××˜×¡××¤:
```typescript
// supabase/functions/whatsapp-webhook/index.ts
// ××˜×¤×œ×ª ×‘×”×•×“×¢×•×ª × ×›× ×¡×•×ª ××•×•××˜×¡××¤
serve(async (req) => {
  const body = await req.json();
  
  if (body.entry?.[0]?.changes?.[0]?.value?.messages) {
    const message = body.entry[0].changes[0].value.messages[0];
    
    // ×¢×™×‘×•×“ ×”×”×•×“×¢×” ×•×™×¦×™×¨×ª ×œ×™×“
    const leadId = await processIncomingLead(
      message.from, 
      message.text.body
    );
    
    // ×©×œ×™×—×ª ×ª×’×•×‘×” ××•×˜×•××˜×™×ª
    await sendWhatsAppResponse(message.from, leadId);
  }
  
  return new Response('OK');
});
```

### ×¤×•× ×§×¦×™×•×ª ×ª×©×œ×•××™×:
```typescript
// supabase/functions/stripe-webhook/index.ts
// ××˜×¤×œ×ª ×‘-webhooks ×©×œ Stripe
serve(async (req) => {
  const sig = req.headers.get('stripe-signature');
  const body = await req.text();
  
  const event = stripe.webhooks.constructEvent(
    body, 
    sig, 
    webhookSecret
  );
  
  switch (event.type) {
    case 'payment_intent.succeeded':
      // ×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×ª×©×œ×•× ×‘××¡×“ ×”× ×ª×•× ×™×
      break;
    case 'payment_intent.payment_failed':
      // ×˜×™×¤×•×œ ×‘×›×©×œ ×ª×©×œ×•×
      break;
  }
  
  return new Response('OK');
});
```

### ×¨×©×™××” ××œ××” ×©×œ Edge Functions:

1. **ai-intake-openai** - ×—×™×œ×•×¥ ××™×“×¢ ××©×¤×˜×™ ×¢× OpenAI
2. **transcribe-voice** - ×ª××œ×•×œ ×§×•×œ×™ ×¢× Whisper
3. **whatsapp-webhook** - ×§×‘×œ×ª ×”×•×“×¢×•×ª ×•×•××˜×¡××¤
4. **stripe-webhook** - ×˜×™×¤×•×œ ×‘×ª×©×œ×•××™×
5. **google-calendar-sync** - ×¡× ×›×¨×•×Ÿ ×™×•××Ÿ
6. **openai-chat** - ×¦'××˜ ×›×œ×œ×™ ×¢× OpenAI
7. **ai-court-orchestrator** - ×ª×–××•×¨ ×‘×™×ª ××©×¤×˜ AI
8. **court-document-upload** - ×”×¢×œ××ª ××¡××›×™× ××©×¤×˜×™×™×
9. **evidence-search** - ×—×™×¤×•×© ×¨××™×•×ª
10. **case-export** - ×™×™×¦×•× ×ª×™×§×™×
11. **court-reminder** - ×ª×–×›×•×¨×•×ª ×‘×™×ª ××©×¤×˜
12. **get-professionals** - ×§×‘×œ×ª ×¨×©×™××ª ××§×¦×•×¢×™×™×
13. **hearings** - × ×™×”×•×œ ×“×™×•× ×™×

---

## ğŸ” ××‘×˜×—×”

### Supabase Auth + RLS
- **JWT Tokens** - ××™××•×ª ××‘×•×¡×¡ JSON Web Tokens
- **Row Level Security** - ×”×’× ×” ×‘×¨××ª ×”×©×•×¨×” ×‘×›×œ ×˜×‘×œ×”
- **Role-based Access** - ×‘×§×¨×ª ×’×™×©×” ××‘×•×¡×¡×ª ×ª×¤×§×™×“×™×

### API Keys Management
```typescript
// ×›×œ ×”××¤×ª×—×•×ª ×××•×—×¡× ×™× ×‘-Supabase Secrets
const secrets = {
  OPENAI_API_KEY: 'OpenAI API key',
  WHATSAPP_TOKEN: 'WhatsApp Business API token',
  WHATSAPP_PHONE_ID: 'WhatsApp phone number ID',
  GOOGLE_API_KEY: 'Google Calendar API key',
  HUGGINGFACE_API_KEY: 'HuggingFace API key',
  MODEL_SERVER_URL: 'Custom model server URL'
};
```

### CORS Configuration
```typescript
const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
};
```

### Input Validation
- **Zod Schemas** - ×•×œ×™×“×¦×™×” ×©×œ × ×ª×•× ×™× × ×›× ×¡×™×
- **SQL Injection Protection** - ×”×’× ×” ××¤× ×™ SQL injection
- **XSS Protection** - ×”×’× ×” ××¤× ×™ Cross-Site Scripting

---

## ğŸ“Š API Documentation

### REST API Endpoints

#### Authentication
```http
POST /auth/signup
POST /auth/signin
POST /auth/signout
GET  /auth/user
```

#### Leads Management
```http
GET    /rest/v1/leads
POST   /rest/v1/leads
PUT    /rest/v1/leads/{id}
DELETE /rest/v1/leads/{id}
```

#### Cases Management
```http
GET    /rest/v1/cases
POST   /rest/v1/cases
PUT    /rest/v1/cases/{id}
DELETE /rest/v1/cases/{id}
```

#### AI Functions
```http
POST /functions/v1/ai-intake-openai
POST /functions/v1/transcribe-voice
POST /functions/v1/openai-chat
POST /functions/v1/ai-court-orchestrator
```

### GraphQL API
```graphql
# ×§×‘×œ×ª ×ª×™×§×™× ×¢× ×¤×¨×˜×™ ×œ×§×•×— ×•×¢×•×¨×š ×“×™×Ÿ
query GetCasesWithDetails {
  cases {
    id
    title
    status
    client:profiles(id: $client_id) {
      full_name
      phone
    }
    lawyer:lawyers(id: $assigned_lawyer_id) {
      profile:profiles {
        full_name
      }
      hourly_rate
    }
  }
}
```

### Realtime Subscriptions
```typescript
// ×”××–× ×” ×œ×©×™× ×•×™×™× ×‘×˜×‘×œ×ª leads
const subscription = supabase
  .channel('leads-changes')
  .on('postgres_changes', 
    { 
      event: '*', 
      schema: 'public', 
      table: 'leads' 
    }, 
    (payload) => {
      console.log('Lead changed:', payload);
    }
  )
  .subscribe();
```

---

## ğŸš€ ×¤×¨×™×¡×” ×•-CI/CD

### Frontend Deployment (Netlify)
```yaml
# netlify.toml
[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "18"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

### Backend Deployment (Supabase)
- **××•×˜×•××˜×™** - Edge Functions × ×¤×¨×¡×•×ª ××•×˜×•××˜×™×ª
- **Environment Variables** - ××•×’×“×¨×•×ª ×‘-Supabase Dashboard
- **Database Migrations** - ×¨×¦×•×ª ××•×˜×•××˜×™×ª

### CI/CD Pipeline
```yaml
# .github/workflows/ci.yml
name: CI/CD
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run lint
      - run: npm run test
      - run: npm run build
```

### Environment Variables
```bash
# Production
SUPABASE_URL=https://mlnwpocuvjnelttvscja.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Development  
VITE_OPENAI_API_KEY=sk-...
VITE_SENTRY_DSN=https://...
```

---

## ğŸ”§ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### ×‘×¢×™×•×ª × ×¤×•×¦×•×ª

#### 1. ×©×’×™××•×ª Edge Functions
```bash
# ×‘×“×™×§×ª ×œ×•×’×™×
npx supabase functions logs ai-intake-openai

# ×‘×“×™×§×” ××§×•××™×ª
npx supabase functions serve ai-intake-openai
```

#### 2. ×©×’×™××•×ª RLS
```sql
-- ×‘×“×™×§×ª policy
SELECT * FROM pg_policies WHERE tablename = 'leads';

-- ×”×¤×¢×œ×ª RLS
ALTER TABLE leads ENABLE ROW LEVEL SECURITY;
```

#### 3. ×©×’×™××•×ª CORS
```typescript
// ×•×™×“×•× ×©×”×•×¡×¤×ª CORS headers
const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
};

if (req.method === 'OPTIONS') {
  return new Response(null, { headers: corsHeaders });
}
```

#### 4. ×©×’×™××•×ª ××™××•×ª
```typescript
// ×‘×“×™×§×ª JWT token
const token = req.headers.get('Authorization')?.replace('Bearer ', '');
const { data: { user }, error } = await supabase.auth.getUser(token);
```

### ×›×œ×™ ×“×™×‘×•×’

#### Frontend
```typescript
// React DevTools
// TanStack Query DevTools
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';

// Console logging
console.log('Debug info:', { user, session, data });
```

#### Backend
```typescript
// Edge Function logging
console.log('Function called with:', req.method, req.url);
console.error('Error occurred:', error);

// Supabase logging
const { data, error } = await supabase
  .from('table')
  .select()
  .eq('id', id);
  
if (error) console.error('Supabase error:', error);
```

### Performance Monitoring
```typescript
// Sentry integration
import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: process.env.VITE_SENTRY_DSN,
  environment: process.env.NODE_ENV,
});
```

---

## ğŸ“ˆ ×× ×œ×™×˜×™×§×” ×•××¢×§×‘

### Supabase Analytics
- **Database Performance** - ×‘×™×¦×•×¢×™ ×‘×¡×™×¡ × ×ª×•× ×™×
- **API Usage** - ×©×™××•×© ×‘-API
- **Edge Function Logs** - ×œ×•×’×™ ×¤×•× ×§×¦×™×•×ª
- **Auth Events** - ××™×¨×•×¢×™ ××™××•×ª

### Custom Analytics
```typescript
// ××¢×§×‘ ××—×¨ ××™×¨×•×¢×™× ×¢×¡×§×™×™×
const trackEvent = async (event: string, data: any) => {
  await supabase.from('analytics_events').insert({
    event_name: event,
    event_data: data,
    user_id: user?.id,
    timestamp: new Date().toISOString()
  });
};
```

---

## ğŸ“š ××©××‘×™× × ×•×¡×¤×™×

### ×ª×™×¢×•×“ ×—×™×¦×•× ×™
- [Supabase Documentation](https://supabase.com/docs)
- [React Documentation](https://react.dev)
- [TypeScript Documentation](https://www.typescriptlang.org/docs/)
- [TailwindCSS Documentation](https://tailwindcss.com/docs)

### ×§×”×™×œ×” ×•×ª××™×›×”
- **Discord**: [Supabase Community](https://discord.supabase.com)
- **GitHub Issues**: [Project Repository](https://github.com/...)
- **Internal Slack**: #dev-team

### Code Style Guidelines
```typescript
// TypeScript interfaces
interface UserProfile {
  id: string;
  fullName: string;
  email: string;
  role: 'customer' | 'lawyer' | 'admin';
}

// React components
const Component: React.FC<Props> = ({ prop1, prop2 }) => {
  // Hooks at the top
  const [state, setState] = useState<Type>(initialValue);
  const { data, error } = useQuery(['key'], fetchFn);
  
  // Early returns
  if (error) return <ErrorComponent />;
  if (!data) return <LoadingComponent />;
  
  // JSX
  return (
    <div className="container mx-auto p-4">
      {/* Content */}
    </div>
  );
};
```

---

## ğŸ¯ ××˜×¨×•×ª ×¤×™×ª×•×— ×¢×ª×™×“×™×•×ª

### ×©×œ×‘ ×”×‘× (Q1 2025)
- [ ] **Mobile App** - ××¤×œ×™×§×¦×™×” ×œ×™×•×–×¨ ×•-Android
- [ ] **Advanced AI** - ×©×™×¤×•×¨ ×™×›×•×œ×•×ª AI ×•×”×•×¡×¤×ª ××•×“×œ×™×
- [ ] **Integration Hub** - ××¨×›×– ××™× ×˜×’×¨×¦×™×•×ª × ×•×¡×£
- [ ] **Analytics Dashboard** - ×œ×•×— ×‘×§×¨×” ××ª×§×“×

### ×©×œ×‘ ××¨×•×š ×˜×•×•×— (Q2-Q3 2025)
- [ ] **International Expansion** - ×”×¨×—×‘×” ×œ×©×•×•×§×™× × ×•×¡×¤×™×
- [ ] **Blockchain Integration** - ×—×•×–×™× ×—×›××™×
- [ ] **AI Court System** - ×‘×™×ª ××©×¤×˜ AI ××œ×
- [ ] **White Label Solution** - ×¤×ª×¨×•×Ÿ ×œ××©×¨×“×™ ×¢×•×¨×›×™ ×“×™×Ÿ

---

**ğŸ“ ×™×¦×™×¨×ª ×§×©×¨ ×œ×ª××™×›×” ×˜×›× ×™×ª:**
- **Lead Developer**: [contact@example.com]
- **DevOps**: [devops@example.com]
- **Emergency**: [emergency@example.com]

---

*××¡××š ×–×” ××ª×¢×“×›×Ÿ ×‘××•×¤×Ÿ ×©×•×˜×£. ×’×¨×¡×” ××—×¨×•× ×”: ×“×¦××‘×¨ 2024*